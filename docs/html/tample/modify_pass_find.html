<!DOCTYPE html>
<html class="ui-page-login">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>找回密码</title>
		<link href="../dist/css/mui.css" rel="stylesheet" />
		<style>
			.mui-input-group:first-child {
				margin-top: 20px;
			}
			
			.mui-content-padded {
				margin-top: 25px;
			}
			
			.mui-btn {
				padding: 10px;
			}
			.mui-toast-message{
				background: none;
			}
			.loadWrap{
				height: 100%;
				background: #CCCCCC;
				opacity: .4!important;
				display: none;
				right: 0;
			    z-index: 998;
			    top: 0;
			    position: fixed;
			    bottom: 0;
			    left: 0;
			    -webkit-transition-duration: .4s;
			    transition-duration: .4s;
			}
			.loading-container{
				    line-height: 17px;
			    position: fixed;
			    z-index: 9999;
			    left: 50%;
			    -webkit-transition: opacity .3s;
			    transition: opacity .3s;
			    -webkit-transform: translate(-50%,0);
			    transform: translate(-50%,0);
			    opacity: 1;
				bottom: 50%;
			}
		</style>
	</head>

	<body>
		<div class="mui-content">
			<form class="mui-input-group" id="input_pass">
				<div class="mui-input-row">
					<input id='new-pass' type="password" class="mui-input mui-input-password" placeholder="请输入6-15数字字母组合" maxlength="15" pattern="[0-9a-zA-Z]">
				</div>

			</form>
			<div class="mui-content-padded">
				<button id='sendMail' class="mui-btn mui-btn-block mui-btn-danger">下一步</button>
			</div>
		</div>
		<!--蒙层-->
		<div class=" loadWrap" >
			<div class="loading-container">	
					<div class="mui-loading mui-spinner"></div>
			</div>
		</div>
		<script src="../dist/js/mui.min.js"></script>
		<script src="../dist/js/zepto-1.2.0.js"></script>
		<script type="text/javascript">
			mui.ready(function() {
				var pass_text = '',
					reg = /(\d+[a-zA-Z]+){6,15}/g,
					check = true;
					var $pass = document.getElementById('new-pass');
					//若当前input为空，则alert提醒 
					$pass.oninput = function(){
						if(this.length==0||this.length=='undefined'){
							pass_text='密码不能为空';
							check = false;
						}
					}
					
				mui('.mui-content-padded').on('tap', '#sendMail', function() {

					//校验通过，继续执行业务逻辑 

					if(check) {
						loadDrop.open();
						if(false){
							loadDrop.close(function(){
								window.location.href = './login.html'
							})
						}
					} else {
						mui.alert(pass_text);
					}

				})

			})
	var  loadDrop = {
				dom :document.getElementsByClassName('loadWrap')[0],
				open : function(){
					this.dom.style.display= 'block';
				},
				close :function(fun){//关闭蒙层
						this.dom.style.display = 'none';
						if(fun){fun();}
					
				}
			}
		</script>
	</body>

</html>